@using Microsoft.AspNetCore.Components.Authorization

<nav class="sticky top-0 z-50 bg-neutral-50 bg-opacity-95 backdrop-blur dark:bg-neutral-900">
    <div class="relative flex h-16 items-center justify-between max-w-5xl mx-auto px-6 md:px-12 xl:px-6">
        <!-- Mobile menu button -->
        <div class="absolute inset-y-0 left-0 flex items-center pl-2 sm:hidden">
            <button @onclick="ToggleNavMenu" class="inline-flex items-center justify-center rounded-md p-2 bg-neutral-100" aria-controls="mobile-menu" aria-expanded="false">
                <span class="sr-only">Open main menu</span>

                <svg class="h-6 w-6 fill-neutral-900 @NavButtonCssClass" version="1.1" id="lni_lni-line-double" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 64 64" style="enable-background:new 0 0 64 64;" xml:space="preserve">
                    <path d="M4,26.6h56c1.2,0,2.3-1,2.3-2.3s-1-2.3-2.3-2.3H4c-1.2,0-2.3,1-2.3,2.3S2.8,26.6,4,26.6z"/>
                    <path d="M60,37.4H4c-1.2,0-2.3,1-2.3,2.3s1,2.3,2.3,2.3h56c1.2,0,2.3-1,2.3-2.3S61.2,37.4,60,37.4z"/>
                </svg>

                <svg class="h-6 w-6 fill-neutral-900 @NavBarCssClass" version="1.1" id="lni_lni-close" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 64 64" style="enable-background:new 0 0 64 64;" xml:space="preserve">
                    <path d="M35.2,32L59.6,7.6c0.9-0.9,0.9-2.3,0-3.2c-0.9-0.9-2.3-0.9-3.2,0L32,28.8L7.6,4.4c-0.9-0.9-2.3-0.9-3.2,0 c-0.9,0.9-0.9,2.3,0,3.2L28.8,32L4.4,56.4c-0.9,0.9-0.9,2.3,0,3.2c0.4,0.4,1,0.7,1.6,0.7c0.6,0,1.2-0.2,1.6-0.7L32,35.2l24.4,24.4 c0.4,0.4,1,0.7,1.6,0.7c0.6,0,1.2-0.2,1.6-0.7c0.9-0.9,0.9-2.3,0-3.2L35.2,32z"/>
                </svg>
            </button>
        </div>

        <div class="flex flex-1 items-center justify-center sm:items-stretch sm:justify-start">
            <div class="flex flex-shrink-0 items-center">
                <h1 class="font-mono font-bold text-lg text-blue-500 tracking-wider">@Constants.AppName</h1>
            </div>
            <div class="hidden sm:ml-9 sm:block">
                <div class="flex space-x-4">
                    <a href="@Constants.PathToIndex" class="text-gray-400 hover:text-black dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-800 rounded-md px-3 py-2 text-sm font-medium">
                        Home
                    </a>
                    <a href="@Constants.PathToSharex" class="text-gray-400 hover:text-black dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-800 rounded-md px-3 py-2 text-sm font-medium">
                        ShareX
                    </a>
                </div>
            </div>
        </div>

        <div class="absolute inset-y-0 right-0 flex items-center pr-2 sm:static sm:inset-auto sm:ml-6 sm:pr-0">
            <div class="relative">
                <div>
                    <AuthorizeView>
                        <NotAuthorized>
                            <a href="@Constants.PathToAuthLogin" class="text-neutral-900 bg-neutral-100 hover:bg-neutral-200 dark:text-gray-100 dark:bg-neutral-800 dark:hover:bg-neutral-700 rounded-md px-3 py-2 text-sm font-medium">
                                Login
                            </a>
                        </NotAuthorized>
                        <Authorized>
                            <a href="@Constants.PathToAuthLogout" class="text-neutral-900 bg-neutral-100 hover:bg-neutral-200 dark:text-gray-100 dark:bg-neutral-800 dark:hover:bg-neutral-700 rounded-md px-3 py-2 text-sm font-medium">
                                Logout
                            </a>
                        </Authorized>
                    </AuthorizeView>
                </div>
            </div>
        </div>
    </div>

    <!-- Mobile menu -->
    <div class="border-b-2 border-neutral-200 sm:hidden @NavBarCssClass" id="mobile-menu">
        <div @onclick="ToggleNavMenu" class="space-y-1 px-2 pt-2 pb-3">
            <a href="@Constants.PathToIndex" class="text-gray-600 hover:bg-gray-700 hover:text-white block rounded-md px-3 py-2 text-base font-medium">
                Home
            </a>
            <a href="@Constants.PathToSharex" class="text-gray-600 hover:bg-gray-700 hover:text-white block rounded-md px-3 py-2 text-base font-medium">
                ShareX
            </a>

            <AuthorizeView>
                <Authorized>
                    <hr/>
                    <a href="@Constants.PathToDashboardFiles" class="text-gray-600 hover:bg-gray-700 hover:text-white block rounded-md px-3 py-2 text-base font-medium">
                        Meine Dateien
                    </a>
                    <a href="@Constants.PathToDashboardUpload" class="text-gray-600 hover:bg-gray-700 hover:text-white block rounded-md px-3 py-2 text-base font-medium">
                        Datei Hochladen
                    </a>
                    <a href="@Constants.PathToDashboardAccount" class="text-gray-600 hover:bg-gray-700 hover:text-white block rounded-md px-3 py-2 text-base font-medium">
                        Mein Account
                    </a>
                </Authorized>
            </AuthorizeView>
        </div>
    </div>
</nav>

<!-- Desktop menu -->
<AuthorizeView>
    <Authorized>
        <nav class="sticky top-16 z-50 hidden sm:block bg-neutral-100 bg-opacity-95 backdrop-blur border-y-2 border-neutral-200 dark:bg-neutral-800 dark:border-neutral-700">
            <div class="max-w-5xl px-4 py-3 mx-auto md:px-6">
                <div class="flex items-center">
                    <ul class="flex flex-row mt-0 mr-6 space-x-8 text-sm font-medium">
                        <li>
                            <a href="@Constants.PathToDashboardFiles" class="font-medium text-neutral-500 hover:text-blue-500">
                                Meine Dateien
                            </a>
                        </li>
                        <li>
                            <a href="@Constants.PathToDashboardUpload" class="font-medium text-neutral-500 hover:text-blue-500">
                                Datei Hochladen
                            </a>
                        </li>
                        <li>
                            <a href="@Constants.PathToDashboardAccount" class="font-medium text-neutral-500 hover:text-blue-500">
                                Mein Account
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
    </Authorized>
</AuthorizeView>

@code {
    private bool collapseNavMenu = true;
    private string? NavBarCssClass => collapseNavMenu ? "hidden" : "block";
    private string? NavButtonCssClass => collapseNavMenu ? "block" : "hidden";

    private void ToggleNavMenu()
    {
        collapseNavMenu = !collapseNavMenu;
    }
}